{% extends "./base.html" %}
{% block content %}

    <form action="{% url 'LogCollection:LogSelect' %}" method="post" class="form-inline" role="form" >
        <div class="form-group">
            <label class="sr-only" for="log_name_condition">log_name_condition</label>
            <input type="text" class="form-control" id="log_name_condition"  name="log_name_condition" placeholder="log_name_condition">
        </div>
        <select class="form-control" name="team_condition">
            <option id="team" value="">Select team</option>
            {% for team in Teams %}
                <option id="team" value="{{team.name}}">{{team.name}}</option>
            {% endfor %}
        </select>
        <select class="form-control" name="error_type_condition">
            <option id="error" value="">Select error type</option>
            {% for error in ErrorTypes %}
                <option id="error" value="{{error.name}}">{{error.name}}</option>
            {% endfor %}
        </select>
        <select class="form-control" name="exit_status_condition">
            <option id="exit_status" value="">exit_status_condition</option>
            {% for stat in Status %}
                <option id="stat" value="{{stat.name}}">{{stat.name}}</option>
            {% endfor %}
        </select>
        <button type="submit">Filter</button>
    </form>


    <div>
        <table class="table table-striped table-bordered">
            <caption>Log Display</caption>
            <thead>
                <tr>
                    {% for th in theader %}
                        <th>
                            <strong>{{ th }}</strong>
                        </th>
                    {% endfor %}
                    <th>Edit</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody>
                {% for log in logs %}
                <tr>
                    <td class="col-sm-2">
                        <form method="post" action="{% url 'LogCollection:LogTextPage' %}">
                            <input type="hidden" name="log_name" value="{{ log.name }}">
                            <input type="submit" name="submit" value="{{ log.name }}" class="btn btn-link">
                        </form>
                    </td>
                    <td class="col-sm-2">{{ log.team|default_if_none:'' }}</td>
                    <td class="col-sm-2">{{ log.error_type }}</td>
                    <td class="col-sm-2">{{ log.exit_status.name }}</td>
                    <td class="col-sm-2">{{ log.codes_number }}</td>
                    <td class="col-sm-2">{{ log.istrainingset }}</td>
                    <td class="col-sm-2">{{ log.description|default_if_none:'' }}</td>
                    <td>
                        <form method="post" action="{% url 'LogCollection:LogEditPage' %}">
                            <input type="hidden" name="log_name" value="{{ log.name }}">
                            <input type="submit" name="submit" value="edit" class="btn btn-link">
                        </form>
                    </td>
                    <td>
                        <form method="post" action="{% url 'LogCollection:LogDelete' %}">
                            <input type="hidden" name="log_name" value="{{ log.name }}">
                            <input type="submit" name="submit" value="delete" class="btn btn-link">
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <p>logs number = {{ logs_number }}</p>

    {% if messages %}
        <script>
            {% for msg in messages %}
                alert('{{ msg.message }}');
            {% endfor %}
        </script>
    {% endif %}


    <form class="form-inline" role="form" action="{% url 'LogCollection:SelectedLogsUpdateErrorTypes' %}" method="post">
        <div>
            <select class="form-control" name="error">
                    <option id="error" value="">Please select error type</option>
                    {% for error in ErrorTypes %}
                        <option id="error" value="{{error.name}}">{{error.name}}</option>
                    {% endfor %}
            </select>
            <button type="submit" name="submit">update error types</button>
        </div>
    </form>

    <br/>
    <form action="{% url 'LogCollection:SelectedLogsDelete' %}" method="post">
        <div>
            <button type="submit" name="submit">delete filter logs</button>
        </div>
    </form>
<br/><br/><br/><br/>

{% endblock %}